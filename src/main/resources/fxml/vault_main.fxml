<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ghostvault.ui.VaultMainController" styleClass="main-container">
   
   <!-- Top Toolbar -->
   <top>
      <ToolBar styleClass="toolbar">
         <!-- File Operations -->
         <Button fx:id="uploadButton" onAction="#handleUpload" styleClass="button, primary-button" text="📁 Upload" />
         <Button fx:id="downloadButton" onAction="#handleDownload" styleClass="button" text="💾 Download" />
         <Button fx:id="previewButton" onAction="#handlePreview" styleClass="button" text="👁️ Preview" />
         <Button fx:id="deleteButton" onAction="#handleDelete" styleClass="button, danger-button" text="🗑️ Delete" />
         
         <Separator />
         
         <!-- Vault Operations -->
         <Button fx:id="backupButton" onAction="#handleBackup" styleClass="button" text="📦 Backup" />
         <Button fx:id="restoreButton" onAction="#handleRestore" styleClass="button" text="📥 Restore" />
         
         <Separator />
         
         <!-- Advanced Features -->
         <Button fx:id="dashboardButton" onAction="#handleDashboard" styleClass="button, primary-button" text="📊 Dashboard" />
         <Button fx:id="notesButton" onAction="#handleNotes" styleClass="button, success-button" text="📝 Notes" />
         <Button fx:id="passwordsButton" onAction="#handlePasswords" styleClass="button, success-button" text="🔑 Passwords" />
         <Button fx:id="fileManagerButton" onAction="#handleFileManager" styleClass="button, primary-button" text="🤖 AI Enhanced" />
         
         <Separator />
         
         <!-- Settings and Session -->
         <Button fx:id="settingsButton" onAction="#handleSettings" styleClass="button" text="⚙️ Settings" />
         <Button fx:id="logoutButton" onAction="#handleLogout" styleClass="button, danger-button" text="🚪 Logout" />
         
         <!-- Session Info -->
         <Region HBox.hgrow="ALWAYS" />
         <Label fx:id="sessionLabel" styleClass="session-label" text="Session: Active" />
      </ToolBar>
   </top>
   
   <!-- Main Content Area -->
   <center>
      <StackPane>
         <!-- Main Content -->
         <VBox fx:id="mainContent" spacing="1">
            <!-- Search Section -->
            <VBox spacing="8" styleClass="search-section">
               <padding>
                  <Insets bottom="12" left="16" right="16" top="12" />
               </padding>
               <TextField fx:id="searchField" promptText="Search files... (try 'find my documents' or 'show me images')" styleClass="search-field" />
            </VBox>
            
            <!-- File List Section -->
            <VBox VBox.vgrow="ALWAYS" styleClass="file-section">
               <padding>
                  <Insets bottom="0" left="16" right="16" top="0" />
               </padding>
               <ListView fx:id="fileListView" styleClass="list-view" VBox.vgrow="ALWAYS" />
            </VBox>
            
            <!-- Activity Log Section -->
            <VBox styleClass="log-section">
               <padding>
                  <Insets bottom="16" left="16" right="16" top="8" />
               </padding>
               <TextArea fx:id="logArea" editable="false" prefHeight="120" styleClass="text-area" />
            </VBox>
         </VBox>
         
         <!-- Dashboard Overlay (Initially Hidden) -->
         <VBox fx:id="dashboardOverlay" visible="false" managed="false" styleClass="dashboard-overlay">
            <!-- Dashboard content will be added programmatically -->
         </VBox>
      </StackPane>
   </center>
   
   <!-- Status Bar -->
   <bottom>
      <HBox alignment="CENTER_LEFT" spacing="16" styleClass="status-bar">
         <padding>
            <Insets bottom="8" left="16" right="16" top="8" />
         </padding>
         
         <Label fx:id="fileCountLabel" styleClass="status-label" text="📁 0 files" />
         <Label fx:id="vaultSizeLabel" styleClass="status-label" text="💾 0 MB" />
         <Label fx:id="encryptionLabel" styleClass="status-label" text="🔐 Vault ready" />
         
         <Region HBox.hgrow="ALWAYS" />
         
         <Label fx:id="operationStatusLabel" styleClass="status-label" />
         <ProgressIndicator fx:id="operationProgress" maxHeight="16" maxWidth="16" visible="false" />
      </HBox>
   </bottom>
</BorderPane>